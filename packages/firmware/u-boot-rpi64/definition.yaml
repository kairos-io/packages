name: "u-boot-rpi64"
category: "firmware"
version: "2025.04-2.2"
labels:
  autobump.strategy: "custom"
  autobump.string_replace: '{ "prefix": "" }'
  autobump.prefix: "prefix"
  autobump.hook: |
    curl -s -L https://download.opensuse.org/ports/aarch64/tumbleweed/repo/oss/$(curl -s -L https://download.opensuse.org/ports/aarch64/tumbleweed/repo/oss/repodata/repomd.xml | dasel -r xml 'repomd.data.[0].location.-href') | zstd -d - | dasel -r xml -w json | jq '.metadata.package[] | select(.name=="u-boot-rpiarm64") | select(.arch!="src").version | map(.)[2] + "-" +  map(.)[1]' -r | tail -n1
  autobump.version_hook: |
    curl -s -L https://download.opensuse.org/ports/aarch64/tumbleweed/repo/oss/$(curl -s -L https://download.opensuse.org/ports/aarch64/tumbleweed/repo/oss/repodata/repomd.xml | dasel -r xml 'repomd.data.[0].location.-href') | zstd -d - | dasel -r xml -w json | jq '.metadata.package[] | select(.name=="u-boot-rpiarm64") | select(.arch!="src").version | map(.)[2] + "-" +  map(.)[1]' -r | tail -n1
  # We do assume that checksum is sha256
  autobump.checksum_hook: |
    curl -s -L https://download.opensuse.org/ports/aarch64/tumbleweed/repo/oss/$(curl -s -L https://download.opensuse.org/ports/aarch64/tumbleweed/repo/oss/repodata/repomd.xml | dasel -r xml 'repomd.data.[0].location.-href') | zstd -d - | dasel -r xml -w json | jq '.metadata.package[] | select(.name=="u-boot-rpiarm64") | select(.arch!="src").checksum."#text"' -r | tail -n1
  package.version: "2025.04-2.2"
  package.checksum: "5ed1b04f0ee03ffbae90cd3bca9714c8c3845fa8d529dc3f3280e18d267f00c1757e5fd9ef079778cfc3439e7c3c632b97c287120d04c51693defdd637eab5b0"
